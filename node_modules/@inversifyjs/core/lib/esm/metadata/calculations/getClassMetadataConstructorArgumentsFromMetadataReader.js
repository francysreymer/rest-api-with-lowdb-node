import { getClassElementMetadataFromNewable } from './getClassElementMetadataFromNewable';
import { getConstructorArgumentMetadataFromLegacyMetadata } from './getConstructorArgumentMetadataFromLegacyMetadata';
export function getClassMetadataConstructorArgumentsFromMetadataReader(type, metadataReader) {
    const legacyConstructorMetadata = metadataReader.getConstructorMetadata(type);
    const constructorArgumentsMetadata = [];
    for (const [stringifiedIndex, metadataList] of Object.entries(legacyConstructorMetadata.userGeneratedMetadata)) {
        const index = parseInt(stringifiedIndex);
        constructorArgumentsMetadata[index] =
            getConstructorArgumentMetadataFromLegacyMetadata(type, index, metadataList);
    }
    if (legacyConstructorMetadata.compilerGeneratedMetadata !== undefined) {
        for (let i = 0; i < legacyConstructorMetadata.compilerGeneratedMetadata.length; ++i) {
            if (constructorArgumentsMetadata[i] === undefined) {
                const typescriptMetadata = legacyConstructorMetadata
                    .compilerGeneratedMetadata[i];
                constructorArgumentsMetadata[i] =
                    getClassElementMetadataFromNewable(typescriptMetadata);
            }
        }
    }
    return constructorArgumentsMetadata;
}
//# sourceMappingURL=getClassMetadataConstructorArgumentsFromMetadataReader.js.map